{% extends 'base.html' %}
{% block title %}Chat – AK{% endblock %}

{% block content %}
<div class="chat">
  <div class="chat__container">
    <div class="chat__box">
      {% if messages %}
        {% for message in messages %}
          {% if message.sender_role == 'teacher' %}
            <div class="chat__message chat__message--teacher">
              <strong>Nauczyciel:</strong> {{ message.content }}
            </div>
          {% else %}
            <div class="chat__message chat__message--student">
              <strong>Uczeń:</strong> {{ message.content }}
            </div>
          {% endif %}
        {% endfor %}
      {% else %}
        <p class="chat__empty">Brak wiadomości.</p>
      {% endif %}
    </div>

    <form method="POST" class="chat__form">
      {{ form.hidden_tag() }}

      <div class="chat__field">
        {{ form.message.label(class="chat__label") }}
        {{ form.message(class="chat__input") }}
      </div>

      <div class="chat__submit">
        {{ form.submit(class="chat__btn") }}
      </div>
    </form>

    <div class="chat__back">
      <a href="{{ url_for('main.dashboard') }}" class="chat__back-link">&larr; Wróć do dashboardu</a>
    </div>
  </div>
</div>
{% endblock %}